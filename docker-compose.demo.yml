version: '3.8'

services:
  go2rtc:
    image: alexxit/go2rtc:latest
    container_name: vendvision-go2rtc
    restart: unless-stopped
    
    # Network mode: bridge (local only by default)
    network_mode: bridge
    
    ports:
      - "1984:1984"   # Web UI & API (http://localhost:1984)
      - "8555:8555"   # WebRTC
      - "8554:8554"   # RTSP server (re-stream)
    
    volumes:
      - ./go2rtc-software-optimized.yaml:/config/go2rtc.yaml:ro
    
    environment:
      - TZ=America/Los_Angeles  # Your timezone
    
    # Healthcheck
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:1984/api"]
      interval: 30s
      timeout: 10s
      retries: 3

